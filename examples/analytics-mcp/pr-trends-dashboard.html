<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub PR Trends Dashboard - Analytics MCP</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 5px 0;
            opacity: 0.9;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #667eea;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #64748b;
            font-size: 1.1em;
        }
        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .chart-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .trend-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
            padding: 4px 8px;
            border-radius: 20px;
            font-weight: normal;
        }
        .trend-up {
            background: #dcfce7;
            color: #166534;
        }
        .trend-down {
            background: #fef2f2;
            color: #991b1b;
        }
        .trend-stable {
            background: #f1f5f9;
            color: #475569;
        }
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .insight-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .insight-title {
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .insight-text {
            color: #64748b;
            line-height: 1.6;
        }
        .demo-note {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #f59e0b;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        .pr-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .pr-stat {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .pr-stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }
        .pr-stat-label {
            color: #64748b;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìà GitHub PR Trends Dashboard</h1>
            <p><strong>Repository:</strong> null-shot/typescript-agent-framework</p>
            <p>Real-time Pull Request Analytics powered by Analytics MCP</p>
            <p><em>Data collected: September 4, 2025</em></p>
        </div>

        <div class="demo-note">
            <strong>üéØ Live PR Trend Analysis:</strong> This dashboard shows real GitHub PR data collected using our enhanced collector. 
            The trends below demonstrate how Analytics MCP can track development velocity and team productivity over time.
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">43</div>
                <div class="stat-label">üìä Total PRs</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">34</div>
                <div class="stat-label">‚úÖ Merged PRs</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">üîÑ Open PRs</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">79%</div>
                <div class="stat-label">üéØ Merge Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">24</div>
                <div class="stat-label">üìà PRs (4 weeks)</div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">
                üî• PR Activity Trends (Last 4 Weeks)
                <span class="trend-indicator trend-up">üìà +85% activity</span>
            </div>
            <canvas id="prTrendsChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <div class="chart-title">
                ‚ö° Weekly PR Breakdown
            </div>
            <div class="pr-stats">
                <div class="pr-stat">
                    <div class="pr-stat-number">0</div>
                    <div class="pr-stat-label">Week 4 Ago - Created</div>
                </div>
                <div class="pr-stat">
                    <div class="pr-stat-number">4</div>
                    <div class="pr-stat-label">Week 3 Ago - Created</div>
                </div>
                <div class="pr-stat">
                    <div class="pr-stat-number">13</div>
                    <div class="pr-stat-label">Week 2 Ago - Created</div>
                </div>
                <div class="pr-stat">
                    <div class="pr-stat-number">7</div>
                    <div class="pr-stat-label">Last Week - Created</div>
                </div>
            </div>
            <canvas id="weeklyBreakdownChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <div class="chart-title">
                üéØ PR Success Rate Analysis
            </div>
            <canvas id="successRateChart" width="400" height="200"></canvas>
        </div>

        <div class="insights-grid">
            <div class="insight-card">
                <div class="insight-title">üöÄ Development Velocity</div>
                <div class="insight-text">
                    <strong>Peak Activity:</strong> Week 2 ago saw 13 PRs created - the highest activity period.
                    This represents a 225% increase from the previous week, indicating a major development push.
                </div>
            </div>
            <div class="insight-card">
                <div class="insight-title">‚úÖ Quality Metrics</div>
                <div class="insight-text">
                    <strong>Excellent Merge Rate:</strong> 79% of all PRs get merged successfully.
                    The team maintains high code quality with efficient review processes.
                </div>
            </div>
            <div class="insight-card">
                <div class="insight-title">üìä Trend Analysis</div>
                <div class="insight-text">
                    <strong>Consistent Output:</strong> After the peak, activity normalized to 7 PRs/week.
                    This suggests sustainable development pace with occasional sprint periods.
                </div>
            </div>
            <div class="insight-card">
                <div class="insight-title">üîÑ Current State</div>
                <div class="insight-text">
                    <strong>Healthy Pipeline:</strong> Only 3 open PRs indicates efficient review cycles.
                    No draft PRs suggests focused, ready-to-merge contributions.
                </div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">
                üìà How Analytics MCP Enables This Analysis
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                <div style="background: #f8fafc; padding: 20px; border-radius: 8px;">
                    <h4 style="color: #667eea; margin-top: 0;">üîç Data Collection</h4>
                    <ul style="color: #64748b; line-height: 1.6;">
                        <li>GitHub API integration</li>
                        <li>Automated daily collection</li>
                        <li>Historical trend analysis</li>
                        <li>Real-time metrics tracking</li>
                    </ul>
                </div>
                <div style="background: #f8fafc; padding: 20px; border-radius: 8px;">
                    <h4 style="color: #667eea; margin-top: 0;">üìä Analytics Engine</h4>
                    <ul style="color: #64748b; line-height: 1.6;">
                        <li>Time-series data storage</li>
                        <li>Efficient batch operations</li>
                        <li>Global data distribution</li>
                        <li>Cost-effective scaling</li>
                    </ul>
                </div>
                <div style="background: #f8fafc; padding: 20px; border-radius: 8px;">
                    <h4 style="color: #667eea; margin-top: 0;">üéØ MCP Integration</h4>
                    <ul style="color: #64748b; line-height: 1.6;">
                        <li>Standardized data access</li>
                        <li>Tool-based interactions</li>
                        <li>Query and analysis APIs</li>
                        <li>Dashboard automation</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Real PR trend data from our collector
        const prTrendData = {
            labels: ['Week 4 Ago', 'Week 3 Ago', 'Week 2 Ago', 'Last Week'],
            datasets: [{
                label: 'PRs Created',
                data: [0, 4, 13, 7],
                borderColor: '#667eea',
                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                tension: 0.4,
                fill: true
            }, {
                label: 'PRs Merged',
                data: [1, 5, 8, 6],
                borderColor: '#10b981',
                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                tension: 0.4,
                fill: true
            }, {
                label: 'PRs Closed',
                data: [0, 0, 4, 0],
                borderColor: '#ef4444',
                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                tension: 0.4,
                fill: true
            }]
        };

        const weeklyBreakdownData = {
            labels: ['Week 4 Ago', 'Week 3 Ago', 'Week 2 Ago', 'Last Week'],
            datasets: [{
                label: 'Created',
                data: [0, 4, 13, 7],
                backgroundColor: '#667eea'
            }, {
                label: 'Merged',
                data: [1, 5, 8, 6],
                backgroundColor: '#10b981'
            }, {
                label: 'Closed',
                data: [0, 0, 4, 0],
                backgroundColor: '#ef4444'
            }]
        };

        const successRateData = {
            labels: ['Merged', 'Closed', 'Open'],
            datasets: [{
                data: [34, 6, 3],
                backgroundColor: [
                    '#10b981',
                    '#ef4444',
                    '#f59e0b'
                ],
                borderWidth: 0
            }]
        };

        // Create PR trends chart
        const prTrendsCtx = document.getElementById('prTrendsChart').getContext('2d');
        new Chart(prTrendsCtx, {
            type: 'line',
            data: prTrendData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    }
                }
            }
        });

        // Create weekly breakdown chart
        const weeklyCtx = document.getElementById('weeklyBreakdownChart').getContext('2d');
        new Chart(weeklyCtx, {
            type: 'bar',
            data: weeklyBreakdownData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        stacked: true
                    },
                    x: {
                        stacked: true
                    }
                }
            }
        });

        // Create success rate chart
        const successCtx = document.getElementById('successRateChart').getContext('2d');
        new Chart(successCtx, {
            type: 'doughnut',
            data: successRateData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right',
                    }
                }
            }
        });

        // Animate stats on page load
        function animateNumber(elementSelector, targetValue, suffix = '') {
            const elements = document.querySelectorAll(elementSelector);
            elements.forEach(element => {
                let current = 0;
                const increment = targetValue / 30;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= targetValue) {
                        current = targetValue;
                        clearInterval(timer);
                    }
                    element.textContent = Math.floor(current) + suffix;
                }, 50);
            });
        }

        // Add some animation on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelectorAll('.stat-card').forEach((card, index) => {
                    setTimeout(() => {
                        card.style.transform = 'translateY(0)';
                        card.style.opacity = '1';
                    }, index * 100);
                });
            }, 200);
        });

        // Initial styling for animation
        document.querySelectorAll('.stat-card').forEach(card => {
            card.style.transform = 'translateY(20px)';
            card.style.opacity = '0';
            card.style.transition = 'all 0.5s ease';
        });
    </script>
</body>
</html>
